(()=>{function e(){const[e,t]=React.useState([]),[a,c]=React.useState(!0),[l,n]=React.useState(null),[m,s]=React.useState(()=>{const e=localStorage.getItem("completedRides");return e?new Set(JSON.parse(e)):new Set}),r=async()=>{try{c(!0),n(null);const e=await fetch("https://corsproxy.io/?"+encodeURIComponent("https://www.thrill-data.com/waittimes/epic-universe"));if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.text(),l=[],s=/<tr[^>]*>.*?<td[^>]*>([^<]+)<\/td>.*?<td[^>]*>([^<]+)<\/td>.*?<td[^>]*>([^<]+)<\/td>.*?<td[^>]*>(\d+)<\/td>/gs;let r;for(;null!==(r=s.exec(a));){const e=r[1].trim(),t=r[2].trim(),a=parseInt(r[4])||0;e&&!isNaN(a)&&l.push({name:e,waitTime:a,heightReq:t,completed:m.has(e)})}if(0===l.length)throw new Error("No rides found in the response");l.sort((e,t)=>e.waitTime-t.waitTime),t(l),c(!1)}catch(e){console.error("Error fetching wait times:",e),n(`Failed to fetch wait times: ${e.message}. Please try again later.`),c(!1)}},i=a=>{const c=new Set(m);c.add(a),s(c),localStorage.setItem("completedRides",JSON.stringify(Array.from(c))),t(e.map(e=>e.name===a?{...e,completed:!0}:e))};return React.useEffect(()=>{r();const e=setInterval(r,6e4);return()=>clearInterval(e)},[]),a?React.createElement("div",{className:"container mt-5"},"Loading..."):l?React.createElement("div",{className:"container mt-5 text-danger"},l):React.createElement("div",{className:"container mt-5"},React.createElement("h1",{className:"mb-4"},"Universal Studios Ride Planner"),React.createElement("div",{className:"row mb-4"},React.createElement("div",{className:"col"},React.createElement("button",{className:"btn btn-primary",onClick:r},"Refresh Wait Times"),React.createElement("button",{className:"btn btn-secondary ms-2",onClick:()=>{s(new Set),localStorage.removeItem("completedRides"),t(e.map(e=>({...e,completed:!1})))}},"Reset Completed Rides"))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("h2",null,"Next Best Rides"),React.createElement("div",{className:"list-group"},e.filter(e=>!e.completed).slice(0,3).map(e=>React.createElement("div",{key:e.name,className:"list-group-item"},React.createElement("h5",null,e.name),React.createElement("p",null,"Wait Time: ",e.waitTime," minutes"),React.createElement("p",null,"Height Requirement: ",e.heightReq),React.createElement("button",{className:"btn btn-success",onClick:()=>i(e.name)},"Mark as Complete"))))),React.createElement("div",{className:"col-md-6"},React.createElement("h2",null,"All Rides"),React.createElement("div",{className:"list-group"},e.map(e=>React.createElement("div",{key:e.name,className:"list-group-item "+(e.completed?"bg-light":"")},React.createElement("h5",null,e.name),React.createElement("p",null,"Wait Time: ",e.waitTime," minutes"),React.createElement("p",null,"Height Requirement: ",e.heightReq),!e.completed&&React.createElement("button",{className:"btn btn-success",onClick:()=>i(e.name)},"Mark as Complete")))))))}ReactDOM.render(React.createElement(e,null),document.getElementById("root"))})();